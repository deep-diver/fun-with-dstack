type: task

image: ghcr.io/huggingface/text-generation-inference:2.0.0
env:
  - HUGGING_FACE_HUB_TOKEN
  - MODEL_ID=chansung/mental_health_counseling_v0.1_merged
commands:
  - text-generation-launcher --num-shard 1 --quantize bitsandbytes --max-input-tokens 512 --max-total-tokens 1024 --max-batch-prefill-tokens 512 --port 8080
ports: 
  - 8080

resources:
  gpu:
    memory: 40GB
    name: A100
    count: 1
